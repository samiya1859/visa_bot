<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visa Assistant Chatbot</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        .chatbot-window {
            position: fixed;
            bottom: 20%;
            right: 10%;
            width: 500px;
            height: 500px;
            color: #000000;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 999;
            flex-direction: column;
            box-sizing: border-box;
            overflow-y: auto;
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>

<body>

    <!-- Services Section -->
    <section class="services p-5">
        <div class="container p-5">
            <h2 class="highlighted mb-5">Try Our Services</h2>
            <div class="row">
                <div class="col service" id="mock-chatbot-button">
                    <h3>Mock Interview</h3>
                </div>
                <div class="col service" id="visa-requirements-chatbot-button">
                    <h3>Visa Requirements</h3>
                </div>
                <div class="col service" id="visa-guidance-chatbot-button">
                    <h3>Visa Guidance</h3>
                </div>
                <div class="col service" id="document-auth-chatbot-button">
                    <h3>Document Authentication</h3>
                </div>
            </div>
        </div>
    </section>

    <section class="chat-popup">
        <div id="chatbot-button" class="chatbot-button">
            <img src="assets/images/chat.png" alt="Chat Icon" />
        </div>

        <!-- Chatbot Window -->
        <div id="chatbot-window" class="chatbot-window">
            <div class="chatbot-header">
                <div class="avatar"><img src="assets/images/logo.gif" alt=""></div>
                <div class="chatbot-title">TravelDesk Support</div>
                <div class="close-btn" onclick="closeChatbot()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"
                        class="bi bi-x-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                        <path
                            d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708" />
                    </svg>
                </div>
            </div>

            <div id="mock-chatbot-content" class="chatbot-content" style="display:none;">
                <div class="message bot-message">
                    <p>Hi there! I'm your mock interviewer. Let's start your interview practice. How can I assist you?
                    </p>
                </div>
            </div>

            <div id="visa-requirements-content" class="chatbot-content" style="display:none;">
                <div class="message bot-message">
                    <p>Hi! I can help you with the visa requirements for various countries. Please tell me the country
                        you're applying to.</p>
                </div>
            </div>

            <div id="visa-guidance-content" class="chatbot-content" style="display:none;">
                <div class="message bot-message">
                    <p>Hi! I'm here to guide you through your visa application process. What type of visa are you
                        applying for?</p>
                </div>
            </div>

            <div id="document-auth-content" class="chatbot-content" style="display:none;">
                <div class="message bot-message">
                    <p>Hi! I can assist with document authentication for your visa application. Please upload the
                        document you need help with.</p>
                </div>
            </div>

            <div class="chatbot-input">
                <input type="text" id="user-input" placeholder="Type a message..." />
                <button class="btn btn-gradient text-white" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </section>

    <script>
        // Show and hide chatbot window based on service button clicked
        document.getElementById('mock-chatbot-button').onclick = function () {
            openChatbot('mock-chatbot-content');
        };

        document.getElementById('visa-requirements-chatbot-button').onclick = function () {
            openChatbot('visa-requirements-content');
        };

        document.getElementById('visa-guidance-chatbot-button').onclick = function () {
            openChatbot('visa-guidance-content');
        };

        document.getElementById('document-auth-chatbot-button').onclick = function () {
            openChatbot('document-auth-content');
        };

        // Open the chatbot window with specific content based on the service clicked
        function openChatbot(contentId) {
            document.getElementById('chatbot-window').style.display = 'flex';
            document.getElementById('chatbot-button').style.display = 'none';

            // Hide all content sections and show the selected one
            const contentSections = document.querySelectorAll('.chatbot-content');
            contentSections.forEach(section => section.style.display = 'none');
            document.getElementById(contentId).style.display = 'block';
        }

        // Close the chatbot window
        function closeChatbot() {
            document.getElementById('chatbot-window').style.display = 'none';
            document.getElementById('chatbot-button').style.display = 'flex';
        }

        // Send a message when user presses "Send" button
        function sendMessage() {
            let userInput = document.getElementById('user-input').value;
            if (userInput.trim() !== "") {
                displayMessage(userInput, "user");
                processBotResponse(userInput);
                document.getElementById('user-input').value = ""; // Clear input field
            }
        }

        // Display messages in the chatbot
        function displayMessage(message, sender) {
            const chatbotContent = document.querySelector('.chatbot-content[style="display: block;"]');
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender + '-message');
            messageDiv.innerHTML = `<p>${message}</p>`;
            chatbotContent.appendChild(messageDiv);
            chatbotContent.scrollTop = chatbotContent.scrollHeight; // Scroll to the latest message
        }

        // Process the user's input and generate bot responses
        function processBotResponse(userInput) {
            const activeContent = document.querySelector('.chatbot-content[style="display: block;"]');
            let responseMessage = "";

            if (activeContent.id === 'mock-chatbot-content') {
                if (userInput.toLowerCase().includes("start")) {
                    responseMessage = "What is the purpose of your visit to the United States?";
                } else {
                    responseMessage = "Sorry, I didn't quite understand. Could you ask something else?";
                }
            } else if (activeContent.id === 'visa-requirements-content') {
                responseMessage = "Please provide the country you're applying to.";
            } else if (activeContent.id === 'visa-guidance-content') {
                responseMessage = "What type of visa are you applying for?";
            } else if (activeContent.id === 'document-auth-content') {
                responseMessage = "Please upload your document.";
            }

            displayMessage(responseMessage, "bot");
        }
    </script>

</body>

</html>